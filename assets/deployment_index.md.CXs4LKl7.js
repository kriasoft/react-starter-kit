import{_ as t,c as a,o as r,a6 as i}from"./chunks/framework.C7CfgHXo.js";const g=JSON.parse('{"title":"Deployment","description":"","frontmatter":{},"headers":[],"relativePath":"deployment/index.md","filePath":"deployment/index.md","lastUpdated":1771429567000}'),o={name:"deployment/index.md"};function s(n,e,d,l,h,p){return r(),a("div",null,[...e[0]||(e[0]=[i(`<h1 id="deployment" tabindex="-1">Deployment <a class="header-anchor" href="#deployment" aria-label="Permalink to “Deployment”">​</a></h1><p>React Starter Kit deploys as three Cloudflare Workers backed by a Neon PostgreSQL database. Infrastructure is managed with Terraform.</p><h2 id="what-gets-deployed" tabindex="-1">What Gets Deployed <a class="header-anchor" href="#what-gets-deployed" aria-label="Permalink to “What Gets Deployed”">​</a></h2><table tabindex="0"><thead><tr><th>Component</th><th>Target</th><th>Description</th></tr></thead><tbody><tr><td><strong>Web Worker</strong></td><td>Cloudflare Workers</td><td>Edge router – receives all traffic, routes to app/api via service bindings</td></tr><tr><td><strong>App Worker</strong></td><td>Cloudflare Workers</td><td>Serves the React SPA and static assets</td></tr><tr><td><strong>API Worker</strong></td><td>Cloudflare Workers</td><td>Hono + tRPC server, authentication, database access</td></tr><tr><td><strong>Database</strong></td><td>Neon PostgreSQL</td><td>Managed Postgres with Hyperdrive connection pooling</td></tr><tr><td><strong>Infrastructure</strong></td><td>Terraform</td><td>Worker metadata, Hyperdrive configs, DNS records</td></tr></tbody></table><p>See <a href="/architecture/">Architecture Overview</a> for how these components connect.</p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to “Prerequisites”">​</a></h2><ul><li><strong>Cloudflare account</strong> with Workers enabled</li><li><strong>Neon account</strong> for PostgreSQL hosting (<a href="https://get.neon.com/HD157BR" target="_blank" rel="noreferrer">sign up</a>)</li><li><strong>Terraform</strong> installed (<code>brew install terraform</code> or <a href="https://developer.hashicorp.com/terraform/install" target="_blank" rel="noreferrer">download</a>)</li><li><strong>Domain</strong> added to Cloudflare DNS (optional for initial setup)</li></ul><h2 id="environments" tabindex="-1">Environments <a class="header-anchor" href="#environments" aria-label="Permalink to “Environments”">​</a></h2><table tabindex="0"><thead><tr><th>Environment</th><th>Trigger</th><th>URL pattern</th><th>Purpose</th></tr></thead><tbody><tr><td>Development</td><td><code>bun dev</code></td><td><code>localhost:5173</code></td><td>Local development</td></tr><tr><td>Preview</td><td>Pull request</td><td><code>{codename}.example.com</code></td><td>Isolated PR testing</td></tr><tr><td>Staging</td><td>Push to <code>main</code></td><td><code>staging.example.com</code></td><td>Pre-production validation</td></tr><tr><td>Production</td><td>Manual dispatch</td><td><code>example.com</code></td><td>Live environment</td></tr></tbody></table><p>Each environment has its own Wrangler config, Hyperdrive bindings, and Terraform state. See <a href="/deployment/ci-cd">CI/CD</a> for how deployments are triggered.</p><h2 id="deployment-checklist" tabindex="-1">Deployment Checklist <a class="header-anchor" href="#deployment-checklist" aria-label="Permalink to “Deployment Checklist”">​</a></h2><ol><li><strong>Provision infrastructure</strong> – run Terraform to create workers, Hyperdrive, and DNS records</li><li><strong>Set secrets</strong> – configure <code>BETTER_AUTH_SECRET</code>, Stripe keys, and other secrets via Wrangler. See <a href="/deployment/cloudflare">Cloudflare Workers</a> for the full list</li><li><strong>Run migrations</strong> – apply schema to your production database. See <a href="/deployment/production-database">Production Database</a></li><li><strong>Build and deploy</strong> – push code to workers. See <a href="/deployment/ci-cd">CI/CD</a> or deploy manually:</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bun</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # email → web → api → app</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bun</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> api:deploy</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # Deploy API worker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bun</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app:deploy</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # Deploy App worker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bun</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> web:deploy</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # Deploy Web worker</span></span></code></pre></div><h2 id="section-pages" tabindex="-1">Section Pages <a class="header-anchor" href="#section-pages" aria-label="Permalink to “Section Pages”">​</a></h2><ul><li><a href="/deployment/cloudflare">Cloudflare Workers</a> – Wrangler config, secrets, build and deploy</li><li><a href="/deployment/production-database">Production Database</a> – Neon setup, Hyperdrive, running migrations</li><li><a href="/deployment/ci-cd">CI/CD</a> – GitHub Actions pipelines, preview deployments</li><li><a href="/deployment/monitoring">Monitoring</a> – Logs, analytics, rollbacks, troubleshooting</li></ul>`,15)])])}const k=t(o,[["render",s]]);export{g as __pageData,k as default};
