import{_ as o,o as t,c as a,a6 as i}from"./chunks/framework.BvqLMprX.js";const g=JSON.parse('{"title":"ADR-001 Auth Hint Cookie For Edge Routing","description":"","frontmatter":{},"headers":[],"relativePath":"adr/001-auth-hint-cookie.md","filePath":"adr/001-auth-hint-cookie.md","lastUpdated":1771429567000}'),n={name:"adr/001-auth-hint-cookie.md"};function r(s,e,l,d,c,h){return t(),a("div",null,[...e[0]||(e[0]=[i('<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /adr/001-auth-hint-cookie.md for this page in Markdown format</div><h1 id="adr-001-auth-hint-cookie-for-edge-routing" tabindex="-1">ADR-001 Auth Hint Cookie For Edge Routing <a class="header-anchor" href="#adr-001-auth-hint-cookie-for-edge-routing" aria-label="Permalink to “ADR-001 Auth Hint Cookie For Edge Routing”">​</a></h1><p><strong>Status:</strong> Accepted <strong>Date:</strong> 2025-12-28 <strong>Tags:</strong> auth, routing, edge</p><h2 id="problem" tabindex="-1">Problem <a class="header-anchor" href="#problem" aria-label="Permalink to “Problem”">​</a></h2><p>The web edge needs a fast signal to route <code>/</code> without owning auth logic.</p><h2 id="decision" tabindex="-1">Decision <a class="header-anchor" href="#decision" aria-label="Permalink to “Decision”">​</a></h2><p>Use a dedicated auth-hint cookie set on login and cleared on logout or invalid session. The web worker checks only cookie presence to route, while the app remains the authority. No API calls or session validation in <code>web</code>.</p><p>This cookie is NOT a security boundary. It is a routing hint only. False positives are acceptable and result in one extra redirect to <code>/login</code>.</p><h2 id="implementation-notes" tabindex="-1">Implementation Notes <a class="header-anchor" href="#implementation-notes" aria-label="Permalink to “Implementation Notes”">​</a></h2><ul><li>Cookie name: <code>__Host-auth</code> in HTTPS; <code>auth</code> in HTTP dev (browsers reject <code>__Host-</code> without Secure).</li><li>Cookie lifecycle: set on new session; clear on sign-out; clear on session-check failure.</li><li>Web routing: check for either cookie name; never read session cookies.</li></ul><h2 id="alternatives-considered" tabindex="-1">Alternatives Considered <a class="header-anchor" href="#alternatives-considered" aria-label="Permalink to “Alternatives Considered”">​</a></h2><ol><li><strong>Validate session in web via API</strong> – Couples edge to auth, adds latency/failure modes.</li><li><strong>Read Better Auth session cookie directly</strong> – Brittle to auth library changes and cookie formats.</li></ol><h2 id="consequences" tabindex="-1">Consequences <a class="header-anchor" href="#consequences" aria-label="Permalink to “Consequences”">​</a></h2><ul><li><strong>Positive:</strong> Faster edge routing, clear separation of concerns, auth-lib agnostic.</li><li><strong>Negative:</strong> False positives cause one extra redirect; requires maintaining set/clear hooks.</li></ul><h2 id="links" tabindex="-1">Links <a class="header-anchor" href="#links" aria-label="Permalink to “Links”">​</a></h2><ul><li><a href="https://github.com/kriasoft/react-starter-kit/issues/2101" target="_blank" rel="noreferrer">https://github.com/kriasoft/react-starter-kit/issues/2101</a></li></ul>',16)])])}const k=o(n,[["render",r]]);export{g as __pageData,k as default};
