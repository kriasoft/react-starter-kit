<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ADR-001 Auth Hint Cookie For Edge Routing | React Starter Kit</title>
    <meta name="description" content="Production-ready monorepo for building fast web apps">
    <meta name="generator" content="VitePress v2.0.0-alpha.15">
    <link rel="preload stylesheet" href="/assets/style.BsP_Gi6M.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.91185f51.js"></script>
    <script type="module" src="/assets/app.BBrsjY1-.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.DXMosS3K.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CUWTb1PO.js">
    <link rel="modulepreload" href="/assets/adr_001-auth-hint-cookie.md.Dnb9e0JJ.lean.js">
    <meta name="theme-color" content="#6366f1">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="React Starter Kit">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-8dfbb54d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-4e9cb457></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-4e9cb457>Skip to content</a><!--]--><!----><header class="VPNav" data-v-8dfbb54d data-v-285b2884><div class="VPNavBar" data-v-285b2884 data-v-58628eff><div class="wrapper" data-v-58628eff><div class="container" data-v-58628eff><div class="title" data-v-58628eff><div class="VPNavBarTitle has-sidebar" data-v-58628eff data-v-3d63d7d0><a class="title" href="/" data-v-3d63d7d0><!--[--><!--]--><!----><span data-v-3d63d7d0>React Starter Kit</span><!--[--><!--]--></a></div></div><div class="content" data-v-58628eff><div class="content-body" data-v-58628eff><!--[--><!--]--><div class="VPNavBarSearch search" data-v-58628eff><!--[--><!----><div id="local-search"><button type="button" aria-label="Search" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-58628eff data-v-60a8cac0><span id="main-nav-aria-label" class="visually-hidden" data-v-60a8cac0> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-60a8cac0 data-v-81d7c1d0><!--[--><span data-v-81d7c1d0>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/getting-started" tabindex="0" data-v-60a8cac0 data-v-81d7c1d0><!--[--><span data-v-81d7c1d0>Docs</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-58628eff data-v-d0712604><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-d0712604 data-v-e3edf883 data-v-54bafeef><span class="check" data-v-54bafeef><span class="icon" data-v-54bafeef><!--[--><span class="vpi-sun sun" data-v-e3edf883></span><span class="vpi-moon moon" data-v-e3edf883></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-58628eff data-v-b0b3979c data-v-9fc17c10><!--[--><a class="VPSocialLink no-icon" href="https://chatgpt.com/g/g-69564f0a23088191846aa4072bd9397d-react-starter-kit-assistant" aria-label="Ask GPT" target="_blank" rel="me noopener" data-v-9fc17c10 data-v-0e2189f3><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22.282 9.821a5.985 5.985 0 0 0-.516-4.91 6.046 6.046 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a5.985 5.985 0 0 0-3.998 2.9 6.046 6.046 0 0 0 .743 7.097 5.98 5.98 0 0 0 .51 4.911 6.051 6.051 0 0 0 6.515 2.9A5.985 5.985 0 0 0 13.26 24a6.056 6.056 0 0 0 5.772-4.206 5.99 5.99 0 0 0 3.997-2.9 6.056 6.056 0 0 0-.747-7.073zM13.26 22.43a4.476 4.476 0 0 1-2.876-1.04l.141-.081 4.779-2.758a.795.795 0 0 0 .392-.681v-6.737l2.02 1.168a.071.071 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494zM3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085 4.783 2.759a.771.771 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646zM2.34 7.896a4.485 4.485 0 0 1 2.366-1.973V11.6a.766.766 0 0 0 .388.676l5.815 3.355-2.02 1.168a.076.076 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.872zm16.597 3.855l-5.833-3.387L15.119 7.2a.076.076 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667zm2.01-3.023l-.141-.085-4.774-2.782a.776.776 0 0 0-.785 0L9.409 9.23V6.897a.066.066 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08-4.778 2.758a.795.795 0 0 0-.393.681zm1.097-2.365l2.602-1.5 2.607 1.5v2.999l-2.597 1.5-2.607-1.5z" fill="currentColor"/></svg></a><a class="VPSocialLink no-icon" href="https://discord.gg/2nKEnKq" aria-label="discord" target="_blank" rel="me noopener" data-v-9fc17c10 data-v-0e2189f3><span class="vpi-social-discord"></span></a><a class="VPSocialLink no-icon" href="https://github.com/kriasoft/react-starter-kit" aria-label="github" target="_blank" rel="me noopener" data-v-9fc17c10 data-v-0e2189f3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-58628eff data-v-9b085815 data-v-95e9cd63><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-95e9cd63><span class="vpi-more-horizontal icon" data-v-95e9cd63></span></button><div class="menu" data-v-95e9cd63><div class="VPMenu" data-v-95e9cd63 data-v-160a1c44><!----><!--[--><!--[--><!----><div class="group" data-v-9b085815><div class="item appearance" data-v-9b085815><p class="label" data-v-9b085815>Appearance</p><div class="appearance-action" data-v-9b085815><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-9b085815 data-v-e3edf883 data-v-54bafeef><span class="check" data-v-54bafeef><span class="icon" data-v-54bafeef><!--[--><span class="vpi-sun sun" data-v-e3edf883></span><span class="vpi-moon moon" data-v-e3edf883></span><!--]--></span></span></button></div></div></div><div class="group" data-v-9b085815><div class="item social-links" data-v-9b085815><div class="VPSocialLinks social-links-list" data-v-9b085815 data-v-9fc17c10><!--[--><a class="VPSocialLink no-icon" href="https://chatgpt.com/g/g-69564f0a23088191846aa4072bd9397d-react-starter-kit-assistant" aria-label="Ask GPT" target="_blank" rel="me noopener" data-v-9fc17c10 data-v-0e2189f3><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22.282 9.821a5.985 5.985 0 0 0-.516-4.91 6.046 6.046 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a5.985 5.985 0 0 0-3.998 2.9 6.046 6.046 0 0 0 .743 7.097 5.98 5.98 0 0 0 .51 4.911 6.051 6.051 0 0 0 6.515 2.9A5.985 5.985 0 0 0 13.26 24a6.056 6.056 0 0 0 5.772-4.206 5.99 5.99 0 0 0 3.997-2.9 6.056 6.056 0 0 0-.747-7.073zM13.26 22.43a4.476 4.476 0 0 1-2.876-1.04l.141-.081 4.779-2.758a.795.795 0 0 0 .392-.681v-6.737l2.02 1.168a.071.071 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494zM3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085 4.783 2.759a.771.771 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646zM2.34 7.896a4.485 4.485 0 0 1 2.366-1.973V11.6a.766.766 0 0 0 .388.676l5.815 3.355-2.02 1.168a.076.076 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.872zm16.597 3.855l-5.833-3.387L15.119 7.2a.076.076 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667zm2.01-3.023l-.141-.085-4.774-2.782a.776.776 0 0 0-.785 0L9.409 9.23V6.897a.066.066 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08-4.778 2.758a.795.795 0 0 0-.393.681zm1.097-2.365l2.602-1.5 2.607 1.5v2.999l-2.597 1.5-2.607-1.5z" fill="currentColor"/></svg></a><a class="VPSocialLink no-icon" href="https://discord.gg/2nKEnKq" aria-label="discord" target="_blank" rel="me noopener" data-v-9fc17c10 data-v-0e2189f3><span class="vpi-social-discord"></span></a><a class="VPSocialLink no-icon" href="https://github.com/kriasoft/react-starter-kit" aria-label="github" target="_blank" rel="me noopener" data-v-9fc17c10 data-v-0e2189f3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--[--><!--[--><div class="github-stats" data-v-e543e56f><a href="https://github.com/kriasoft/react-starter-kit/stargazers" class="stat-item" data-v-e543e56f><svg class="stat-icon" aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-v-e543e56f><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.192L.644 6.57a.75.75 0 0 1 .416-1.28l4.21-.611L7.14.67A.75.75 0 0 1 8 .25Z" data-v-e543e56f></path></svg><span class="stat-count" data-v-e543e56f>23k</span></a><a href="https://github.com/kriasoft/react-starter-kit/forks" class="stat-item" data-v-e543e56f><svg class="stat-icon" aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-v-e543e56f><path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0ZM5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Zm6.5 0a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Zm-3.25 8a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Z" data-v-e543e56f></path></svg><span class="stat-count" data-v-e543e56f>4.2k</span></a></div><!--]--><!--]--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-58628eff data-v-19fd2f29><span class="container" data-v-19fd2f29><span class="top" data-v-19fd2f29></span><span class="middle" data-v-19fd2f29></span><span class="bottom" data-v-19fd2f29></span></span></button></div></div></div></div><div class="divider" data-v-58628eff><div class="divider-line" data-v-58628eff></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-8dfbb54d data-v-eac6f343><div class="container" data-v-eac6f343><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-eac6f343><span class="vpi-align-left menu-icon" data-v-eac6f343></span><span class="menu-text" data-v-eac6f343>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-eac6f343 data-v-7b0cc109><button data-v-7b0cc109>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-8dfbb54d data-v-d02a1d4e><div class="curtain" data-v-d02a1d4e></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-d02a1d4e><span class="visually-hidden" id="sidebar-aria-label" data-v-d02a1d4e> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-2a6507b0><section class="VPSidebarItem level-0" data-v-2a6507b0 data-v-0af9b267><div class="item" role="button" tabindex="0" data-v-0af9b267><div class="indicator" data-v-0af9b267></div><h2 class="text" data-v-0af9b267>Documentation</h2><!----></div><div class="items" data-v-0af9b267><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0af9b267 data-v-0af9b267><div class="item" data-v-0af9b267><div class="indicator" data-v-0af9b267></div><a class="VPLink link link" href="/getting-started" data-v-0af9b267><!--[--><p class="text" data-v-0af9b267>Getting Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0af9b267 data-v-0af9b267><div class="item" data-v-0af9b267><div class="indicator" data-v-0af9b267></div><a class="VPLink link link" href="/ui-components" data-v-0af9b267><!--[--><p class="text" data-v-0af9b267>UI Components</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0af9b267 data-v-0af9b267><div class="item" data-v-0af9b267><div class="indicator" data-v-0af9b267></div><a class="VPLink link link" href="/database-schema" data-v-0af9b267><!--[--><p class="text" data-v-0af9b267>Database Schema</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0af9b267 data-v-0af9b267><div class="item" data-v-0af9b267><div class="indicator" data-v-0af9b267></div><a class="VPLink link link" href="/deployment" data-v-0af9b267><!--[--><p class="text" data-v-0af9b267>Deployment</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-2a6507b0><section class="VPSidebarItem level-0" data-v-2a6507b0 data-v-0af9b267><div class="item" role="button" tabindex="0" data-v-0af9b267><div class="indicator" data-v-0af9b267></div><h2 class="text" data-v-0af9b267>Security</h2><!----></div><div class="items" data-v-0af9b267><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0af9b267 data-v-0af9b267><div class="item" data-v-0af9b267><div class="indicator" data-v-0af9b267></div><a class="VPLink link link" href="/security/checklist" data-v-0af9b267><!--[--><p class="text" data-v-0af9b267>Security Checklist</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0af9b267 data-v-0af9b267><div class="item" data-v-0af9b267><div class="indicator" data-v-0af9b267></div><a class="VPLink link link" href="/security/incident-playbook" data-v-0af9b267><!--[--><p class="text" data-v-0af9b267>Incident Playbook</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0af9b267 data-v-0af9b267><div class="item" data-v-0af9b267><div class="indicator" data-v-0af9b267></div><a class="VPLink link link" href="/security/SECURITY.template" data-v-0af9b267><!--[--><p class="text" data-v-0af9b267>Security Policy Template</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-8dfbb54d data-v-38e50cee><div class="VPDoc has-sidebar has-aside" data-v-38e50cee data-v-152651d0><!--[--><!--]--><div class="container" data-v-152651d0><div class="aside" data-v-152651d0><div class="aside-curtain" data-v-152651d0></div><div class="aside-container" data-v-152651d0><div class="aside-content" data-v-152651d0><div class="VPDocAside" data-v-152651d0 data-v-87da9238><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-87da9238 data-v-75d872cc><div class="content" data-v-75d872cc><div class="outline-marker" data-v-75d872cc></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-75d872cc>On this page</div><ul class="VPDocOutlineItem root" data-v-75d872cc data-v-abf72adb><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-87da9238></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-152651d0><div class="content-container" data-v-152651d0><!--[--><!--]--><main class="main" data-v-152651d0><div style="position:relative;" class="vp-doc _adr_001-auth-hint-cookie" data-v-152651d0><div><h1 id="adr-001-auth-hint-cookie-for-edge-routing" tabindex="-1">ADR-001 Auth Hint Cookie For Edge Routing <a class="header-anchor" href="#adr-001-auth-hint-cookie-for-edge-routing" aria-label="Permalink to “ADR-001 Auth Hint Cookie For Edge Routing”">​</a></h1><p><strong>Status:</strong> Accepted <strong>Date:</strong> 2025-12-28 <strong>Tags:</strong> auth, routing, edge</p><h2 id="problem" tabindex="-1">Problem <a class="header-anchor" href="#problem" aria-label="Permalink to “Problem”">​</a></h2><p>The web edge needs a fast signal to route <code>/</code> without owning auth logic.</p><h2 id="decision" tabindex="-1">Decision <a class="header-anchor" href="#decision" aria-label="Permalink to “Decision”">​</a></h2><p>Use a dedicated auth-hint cookie set on login and cleared on logout or invalid session. The web worker checks only cookie presence to route, while the app remains the authority. No API calls or session validation in <code>web</code>.</p><p>This cookie is NOT a security boundary. It is a routing hint only. False positives are acceptable and result in one extra redirect to <code>/login</code>.</p><h2 id="implementation-notes" tabindex="-1">Implementation Notes <a class="header-anchor" href="#implementation-notes" aria-label="Permalink to “Implementation Notes”">​</a></h2><ul><li>Cookie name: <code>__Host-auth</code> in HTTPS; <code>auth</code> in HTTP dev (browsers reject <code>__Host-</code> without Secure).</li><li>Cookie lifecycle: set on new session; clear on sign-out; clear on session-check failure.</li><li>Web routing: check for either cookie name; never read session cookies.</li></ul><h2 id="alternatives-considered" tabindex="-1">Alternatives Considered <a class="header-anchor" href="#alternatives-considered" aria-label="Permalink to “Alternatives Considered”">​</a></h2><ol><li><strong>Validate session in web via API</strong> — Couples edge to auth, adds latency/failure modes.</li><li><strong>Read Better Auth session cookie directly</strong> — Brittle to auth library changes and cookie formats.</li></ol><h2 id="consequences" tabindex="-1">Consequences <a class="header-anchor" href="#consequences" aria-label="Permalink to “Consequences”">​</a></h2><ul><li><strong>Positive:</strong> Faster edge routing, clear separation of concerns, auth-lib agnostic.</li><li><strong>Negative:</strong> False positives cause one extra redirect; requires maintaining set/clear hooks.</li></ul><h2 id="links" tabindex="-1">Links <a class="header-anchor" href="#links" aria-label="Permalink to “Links”">​</a></h2><ul><li><a href="https://github.com/kriasoft/react-starter-kit/issues/2101" target="_blank" rel="noreferrer">https://github.com/kriasoft/react-starter-kit/issues/2101</a></li></ul></div></div></main><footer class="VPDocFooter" data-v-152651d0 data-v-6984ab02><!--[--><!--]--><div class="edit-info" data-v-6984ab02><div class="edit-link" data-v-6984ab02><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/kriasoft/react-starter-kit/edit/main/docs/adr/001-auth-hint-cookie.md" target="_blank" rel="noreferrer" data-v-6984ab02><!--[--><span class="vpi-square-pen edit-link-icon" data-v-6984ab02></span> Edit this page on GitHub<!--]--></a></div><div class="last-updated" data-v-6984ab02><p class="VPLastUpdated" data-v-6984ab02 data-v-50e91637>Last updated: <time datetime="2025-12-28T20:35:40.000Z" data-v-50e91637></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-6984ab02><span class="visually-hidden" id="doc-footer-aria-label" data-v-6984ab02>Pager</span><div class="pager" data-v-6984ab02><!----></div><div class="pager" data-v-6984ab02><a class="VPLink link pager-link next" href="/getting-started" data-v-6984ab02><!--[--><span class="desc" data-v-6984ab02>Next page</span><span class="title" data-v-6984ab02>Getting Started</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-8dfbb54d data-v-f437f5df><div class="container" data-v-f437f5df><p class="message" data-v-f437f5df>Released under the MIT License.</p><p class="copyright" data-v-f437f5df>Copyright © 2014-present Kriasoft</p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>